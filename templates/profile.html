{% extends 'wrapper/main.html' %}
{% block content %}
  {% load static %}

  <div class="name">
    {% if username.image_url != '' %}
      {{ username.image_url }}
      <div>
        <img src="/static/profile/picture/{{ username.image_url }}/file-1.jpg" alt="" width="100" id="img1" />
      </div>
    {% else %}
      <div class="name">
        <img src="{% static 'img/head.png' %}" alt="Заголовок" width="80" height="80" id="img" />
      </div>
    {% endif %}

    <div>{{ username }}</div>
    {% if profession != '' %}
      <div>{{ profession }}</div>
    {% endif %}
  </div>
  <div>
    {% if messages %}
      <ul class="messages">
        {% for message in messages %}
          {{ message }}
        {% endfor %}
      </ul>
    {% endif %}
    <div class="info">
      <div>
        <button id="button1" onclick="fun('questions')"><h4>Вопросы</h4>{{ user_question }}</button>
      </div>
      <div>
        <a href="{% url 'rating' %}"><button id="button3" onclick=""><h4>Вклад</h4>{{ username.rating }}</button></a>
      </div>
      <div>
        <button id="button4" onclick=""><h4>Пусто</h4></button>
      </div>

      <div>
        <button id="button2" onclick="fun('answers')"><h4>Ответы</h4>{{ answers }}</button>
      </div>
    </div>

    <div>
      {% for quest in user_quest %}
        <div>{{ quest.text }}</div>
      {% endfor %}
    </div>
    <div id="answers_div"></div>
  </div>
  {% if user == username %}
    <div class="add_foto">
      <a href="{% url 'upload' %}"><button id="button_add_foto">Добавить фото</button></a>
    </div>
  {% endif %}

  <script>
    const butt1 = document.getElementById('button1')
    const butt2 = document.getElementById('button2')
    
    const username = '{{ username }}'
    const ans = document.getElementById('answers_div')
    
    async function fun(x) {
      let data = await fetch(`/user/${username}/?q=${x}`)
      data = await data.text()
      ans.innerHTML = data
    }
  </script>

  <style>
    .add_foto {
      margin-top: 50px;
      text-align: center;
    }
    #button_add_foto {
      width: fit-content;
      height: 60px;
      padding: 10px;
    }
    #button1,
    #button2,
    #button3,
    #button4 {
      border-color: darkcyan;
      margin: 20px 0 10px 0;
      border-radius: 5px;
      width: 90px;
      height: 50px;
    }
    #answ {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #quest {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .info {
      display: flex;
      justify-content: space-around;
      font-size: 25px;
    }
    #img,
    #img1 {
      border-radius: 50px;
    }
    .name {
      display: flex;
      font-size: 25px;
      flex-direction: column;
      align-items: center;
    }
  </style>
{% endblock %}
